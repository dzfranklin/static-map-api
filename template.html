<!DOCTYPE html>
<html style="padding: 0; margin: 0">

<head>
  <meta charset="utf-8" />
</head>

<body style="padding: 0; margin: 0">
  <div id="map" style="width: 100svw; height: 100svh"></div>

  <script>
    mapboxgl.accessToken = MAPBOX_ACCESS_TOKEN;

    const map = new mapboxgl.Map({
      container: 'map',
      style: 'mapbox://styles/dzfranklin/clxg325c5006e01qmfsghevb9',
    });

    const envelope = turf.envelope(SOURCE);
    map.fitBounds(envelope.bbox, { padding: 50, duration: 0 });

    map.on("style.load", () => {
      map.addSource("SOURCE", { type: "geojson", generateId: true, data: SOURCE });
      LAYERS.forEach(layer => map.addLayer({ source: "SOURCE", ...layer }));

      const checkReady = () => {
        if (map.loaded() && map.areTilesLoaded()) {
          // Links won't work in a static image.
          document.querySelector(".mapbox-improve-map")?.remove();

          document.body.classList.add("ready");
        }
      }
      ["data", "style", "tiles"].forEach(event => map.on("load", checkReady));
    })
  </script>
</body>

</html>
